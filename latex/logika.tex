\chapter{Logika prvog reda s induktivnim definicijama}\label{cha:logika-prvog-reda}
U ovom poglavlju predstavljamo glavne rezultate diplomskog rada koji uključuju formalizaciju
logike prvog reda s induktivnim definicijama \(\mathit{FOL_{ID}}\)
te dokaznog sustava \(\mathit{LKID}\), koje je prvi uveo Brotherston~\cite{brotherston2005}.
Definicije, leme i dokazi u ovom poglavlju preuzete su iz Brotherstonove disertacije~\cite{brotherstonphd}.

Prvo ćemo definirati sintaksu i semantiku logike \(\mathit{FOL_{ID}}\),
nakon čega ćemo definirati standardne modele te logike.
Zatim ćemo prikazati dokazni sustav \(\mathit{LKID}\) te konačno dokazati adekvatnost
sustava \(LKID\) s obzirom na standardnu semantiku,
što je ujedno i glavni rezultat ovog diplomskog rada.

Svaka definicija i lema u ovom poglavlju biti će popraćena svojim pandanom u Coqu.
Jedan je od ciljeva diplomskog rada prikazati primjene Coqa u matematici,
zbog čega leme nećemo dokazivati ``na papiru'',
već se dokaz svake leme može pronaći na GitHub repozitoriju rada.\footnote{TODO: REPO LINK}
Zainteresiranom čitatelju predlažemo interaktivni prolazak kroz dokaze lema.

\section{Sintaksa}\label{sec:sintaksa}
Kao i u svakom izlaganju logike, na početku je potrebno definirati sintaksu.
\begin{definition}\label{def:signatura}
  \textit{Jezik prvog reda s induktivnim predikatima} (kratko: \textbf{signatura}), u oznaci \(\Sigma\),
  je skup simbola od kojih razlikujemo
  \begin{itemize}
  \item funkcijske simbole,
  \item \textit{obične} predikatne simbole i
  \item \textit{induktivne} predikatne simbole.
  \end{itemize}
\end{definition}
\begin{remark}
  Svaki simbol signature ima pripadajuću arnost.
  Funkcijski simboli arnosti nula nazivaju se \textit{konstante},
  a predikatni simboli arnosti nula nazivaju se \textit{propozicije}.
\end{remark}

\noindent Već smo vidjeli da se propozicije, odnosno skupovi, u Coqu mogu reprezentirati tipovima.
Tako i ovdje skupove funkcijskih, običnih predikatnih i induktivnih predikatnih
simbola prikazujemo tipovima.
Tada je arnost pojedinog simbola funkcija sa skupa odgovarajućih simbola u \(\mathbb{N}\).
\begin{minted}{coq}
Structure signature := {
    FuncS : Type;
    fun_ar : FuncS -> nat;
    PredS : Type;
    pred_ar : PredS -> nat;
    IndPredS : Type;
    indpred_ar : IndPredS -> nat
  }.
\end{minted}
\misao{Stavljam i primjere? Tu je dobar primjer \(\Sigma_{PA}\).}

\noindent U ostatku poglavlja promatramo jednu proizvoljnu, ali fiksiranu, signaturu \(\Sigma\).
Fiksiranje nekog proizvoljnog objekta je česta pojava u matematici,
prvenstveno zato što fiksiranjem ne trebamo spominjati argumente eksplicitno.
Coq omogućuje fiksiranje varijable naredbama \texttt{Variable} i \texttt{Context},
pod uvjetom da se korisnik nalazi u \texttt{Section} okolini.\footnote{\url{https://coq.inria.fr/doc/v8.18/refman/language/core/sections.html}}
Većina definicija i lema u ovom radu su napisane upravo unutar \texttt{Section} okoline.

\begin{definition}\label{def:term}
  \textit{Varijabla} je prirodan broj. Skup \textbf{terma} je najmanji skup izraza zatvoren na iduća pravila:
  \begin{enumerate}
  \item svaka varijabla je term;
  \item ako je \(f\) funkcijski simbol arnosti \(n\) te su \(t_{1}\), \ldots, \(t_{n}\) termi\footnote{Primijetimo, broj terma ovisi o arnosti funkcijskog simbola. U Coq implementaciji ovog ``konstruktora'' možemo vidjeti da je on zavisnog tipa.},
    onda je \(f(t_{1}, \ldots, t_{n})\) također term.
  \end{enumerate}
\end{definition}
U općenitijim razmatranjima bi varijable bile članovi proizvoljnog skupa,
no mi smo uzeli prirodne brojeve jer je s njima lakše raditi u Coqu.

\begin{minted}{coq}
Inductive term : Type :=
| var_term : var -> term 
| TFunc : forall (f : FuncS Σ), vec term (fun_ar f) -> term.
\end{minted}

\begin{definition}\label{def:formula}
  Skup svih \textbf{formula} je najmanji skup zatvoren na iduća pravila:
  \begin{enumerate}
  \item ako je \(Q\) obični ili induktivni predikatni simbol arnosti \(n\) te su \(t_{1}\), \ldots, \(t_{n}\) termi,
    onda je \(Q(t_{1}, \ldots, t_{n})\) formula;
  \item ako je \(\varphi\) formula, onda su \(\neg\varphi\) i \(\forall\varphi\) također formule;
  \item ako su \(\varphi\) i \(\psi\) formule, onda je \(\varphi \rightarrow \psi\) također formula.
  \end{enumerate}
\end{definition}
\noindent Za univerzalnu kvantifikaciju odstupamo od tradicionalne defincije formule.
Umjesto kvantificiranja po eksplicitnoj varijabli,
mi ćemo implicitno kvantificirati po varijabli \(0\).
Ovaj pristup kvantifikaciji (ili općenitije, vezivanju varijabli), imena ``de Bruijnovo indeksiranje'', bitno olakšava rad sa supstitucijama, a uveden je u članku~\cite{debruijnamelessdummies}.
O samoj implementaciji de Bruijnovog indeksiranja više se može pročitati u knjizi
\textit{Types and Programming Languages}~\cite{pierce2002tapl}.
Za potrebe ovog rada koristili smo paket \textit{Autosubst2}\footnote{\url{https://github.com/uds-psl/autosubst2}} za automatsko generiranje tipova terma i formula te
pripadajućih funkcija supstitucija i pomoćnih lema.
\misao{Postojala je konfiguracijska datoteka za ovo. Ja to ne bih spominjao.}
\begin{minted}{coq}
Inductive formula : Type :=
| FPred (P : PredS Σ) : vec (term Σ) (pred_ar P) -> formula 
| FIndPred (P : IndPredS Σ) : vec (term Σ) (indpred_ar P) -> formula 
| FNeg : formula -> formula 
| FImp : formula -> formula -> formula 
| FAll : formula -> formula.
\end{minted}

\begin{definition}
  \textbf{Produkcija} je uređena četvorka koja sadrži
  \begin{enumerate}
  \item listu parova običnih predikatnih simbola i vektora terma odgovarajućih duljina,
  \item listu parova induktivnih predikatnih simbola i vektora terma odgovarajućih duljina,
  \item induktivni predikatni simbol \(P\) arnosti \(n\) i
  \item vektor terma duljine \(n\).
  \end{enumerate}
\end{definition}

\begin{minted}{coq}
Record production := mkProd {
    preds : list ({ P : PredS Σ & vec (term Σ) (pred_ar P) });
    indpreds : list ({ P : IndPredS Σ & vec (term Σ) (indpred_ar P) });
    indcons : IndPredS Σ;
    indargs : vec (term Σ) (indpred_ar indcons);
  }.
\end{minted}

\section{Semantika}\label{sec:semantika}
\begin{definition}
  Struktura.
\end{definition}

\begin{definition}
  Okolina, evaluacija.
\end{definition}

\begin{definition}
  Ispunjivost formule.
\end{definition}

\begin{lemma}
  Substitution sanity.
\end{lemma}

\section{Standardni modeli}\label{sec:standardni-modeli}
Operator \(\varphi_{\Phi}\). Aproksimanti. Standardni model.

\section{Sistem sekvenata s induktivnim definicijama}\label{sec:sistem-sekvenata}
LKID. Dopustiva pravila. Primjeri dokaza.

\section{Adekvatnost}\label{sec:adekvatnost}
Lokalne adekvatnosti za pravila izvoda. Glavni teorem.

%%% Local Variables:
%%% mode: LaTeX
%%% TeX-master: "master"
%%% End:
